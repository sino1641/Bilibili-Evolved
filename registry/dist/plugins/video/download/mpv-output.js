!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports["video/download/mpv-output"]=o():e["video/download/mpv-output"]=o()}(globalThis,(()=>(()=>{"use strict";var e={d:(o,t)=>{for(var i in t)e.o(t,i)&&!e.o(o,i)&&Object.defineProperty(o,i,{enumerable:!0,get:t[i]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o)},o={};e.d(o,{plugin:()=>i});const t=coreApis.toast,i={name:"downloadVideo.outputs.mpv",displayName:"下载视频 - MPV 输出支持",author:{name:"diannaojiang",link:"https://github.com/diannaojiang"},description:"为下载视频增加 MPV 输出支持, 配置方式请参考 [Bilibili-Playin-Mpv](https://github.com/diannaojiang/Bilibili-Playin-Mpv)",setup:e=>{let{addData:o}=e;o("downloadVideo.outputs",(e=>{e.push({name:"mpv",displayName:"MPV",description:"弹一条消息显示出播放按钮，点击即可使用MPV进行播放",runAction:async e=>{const o=e.infos.flatMap((e=>e.titledFragments)),i=o.map((e=>e.url)).join("\n"),n=`mpv://--http-header-fields="referer:https://www.bilibili.com/" "${o[0].url}" --audio-file="${o[1].url}"`;console.log(n),t.Toast.show(`<a class="link" href="${encodeURI(n)}" >播放</a>`,"MPV播放"),console.log(i),console.log(e)}})}))},commitHash:"276518e31e164e958ee32f4194e44172e4aeaae7",coreVersion:"2.8.1"};return o=o.plugin})()));